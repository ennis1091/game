$(function(e){function t(){document.getElementById("modal").style.display="block",$(".header_down").show(),$(".header .top i").hasClass("san_down")&&($(".header .top i").removeClass("san_down"),$(".header .top i").addClass("san_up"))}function i(){$(".header_down").hide(),$(".header .top i").hasClass("san_up")&&($(".header .top i").removeClass("san_up"),$(".header .top i").addClass("san_down")),document.getElementById("modal").style.display="none"}function a(e,t){if(!t||t<1)return[];var i,a,o,n=[],s=[],d=!1;for(i=0;i<e;i++)s[i]=i<t?1:0;for(n.push(s.concat());!d;)for(o=0,i=0;i<e-1;i++){if(1==s[i]&&0==s[i+1]){for(a=0;a<i;a++)s[a]=a<o?1:0;s[i]=0,s[i+1]=1;var l=s.concat();n.push(l),-1==l.slice(-t).join("").indexOf("0")&&(d=!0);break}1==s[i]&&o++}return n}var o=0,n=0,s=null,d=0,l=0,h=0,r=null,c=1,v=5;$(".jixuan").on("touchend",function(){"清除"==$(this).html()?($(".gridtable td div").each(function(e){$(this).removeClass("active_red")}),$(".blue td div").each(function(e){$(this).removeClass("active_blue")}),o=0,n=0,d=0,l=0,h=0,r=0,s=0,$("footer div span i").eq(0).html(s),$("footer div span i").eq(1).html(2*s),5==v&&$(this).html("机选")):"机选"==$(this).html()&&1==c?($(".random").show(),$(".baitan").show(),$("footer").css("z-index","6"),c=2):"机选"==$(this).html()&&2==c&&($(".random").hide(),$(".baitan").hide(),$("footer").css("z-index","1"),c=1)}),$(".baitan").click(function(e){(e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,$(".random").hide(),$(".baitan").hide(),$("footer").css("z-index","0"),c=1}),$(".header_down span a").eq(0).click(function(e){(e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,v=5,$(".gridtable td div").each(function(e){$(this).removeClass("active_red")}),$(".blue td div").each(function(e){$(this).removeClass("active_blue")}),o=0,n=0,s=0,$("footer div span i").eq(0).html(s),$("footer div span i").eq(1).html(2*s),$(".jixuan").html("机选"),$(".top b").html("普通投注"),$(".header_down span a").each(function(e){$(this).removeClass("active_i")}),$(this).addClass("active_i"),$(".dantuo").hide(),$(".putong").show(),i(),p=1}),$(".header_down span a").eq(1).click(function(e){(e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,d=0,l=0,h=0,v=6,$(".jixuan").html("清除"),$(".top b").html("胆拖投注"),$(".header_down span a").each(function(e){$(this).removeClass("active_i")}),$(this).addClass("active_i"),$(".putong").hide(),$(".dantuo").show(),i(),p=1}),$(".putong .gridtable td div").click(function(e){if((e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,$(this).hasClass("active_red"))$(this).removeClass("active_red"),o--;else{if(16==o)return;$(this).addClass("active_red"),o++}0==o&0==n?$(".jixuan").html("机选"):$(".jixuan").html("清除"),o>5&&n>0?(s=n*o*(o-1)*(o-2)*(o-3)*(o-4)*(o-5)/720,$("footer div span i").eq(0).html(s),$("footer div span i").eq(1).html(2*s)):(s=0,$("footer div span i").eq(0).html(s),$("footer div span i").eq(1).html(2*s))}),$(".putong .blue td div").click(function(e){(e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,$(this).hasClass("active_blue")?($(this).removeClass("active_blue"),n--):($(this).addClass("active_blue"),n++),0==o&0==n?$(".jixuan").html("机选"):$(".jixuan").html("清除"),o>5&&n>0?(s=n*o*(o-1)*(o-2)*(o-3)*(o-4)*(o-5)/720,$("footer div span i").eq(0).html(s),$("footer div span i").eq(1).html(2*s)):(s=0,$("footer div span i").eq(0).html(s),$("footer div span i").eq(1).html(2*s))}),$(".dantuo .gridtable").eq(0).find("td div").click(function(e){if((e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,$(this).hasClass("active_red"))$(this).removeClass("active_red"),d--;else{if(5==d)return;var t=this;$(".dantuo .gridtable").eq(1).find("td .active_red").each(function(e){$(this).html()==$(t).html()&&($(this).removeClass("active_red"),l--)}),$(this).addClass("active_red"),d++}d+l>=7&&h>1&&l>=2?(r=a(l,6-d).length*a(h,1).length,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r)):d+l>=7&&1==h&&l>=2?(r=a(l,6-d).length,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r)):(r=0,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r))}),$(".dantuo .gridtable").eq(1).find("td div").click(function(e){if((e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,$(this).hasClass("active_red"))$(this).removeClass("active_red"),l--;else{if(19==l)return;var t=this;$(".dantuo .gridtable").eq(0).find("td .active_red").each(function(e){$(this).html()==$(t).html()&&($(this).removeClass("active_red"),d--)}),$(this).addClass("active_red"),l++}d+l>=7&&h>1&&l>=2?(r=a(l,6-d).length*a(h,1).length,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r)):d+l>=7&&1==h&&l>=2?(r=a(l,6-d).length,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r)):(r=0,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r))}),$(".dantuo .blue td div").click(function(e){(e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,$(this).hasClass("active_blue")?($(this).removeClass("active_blue"),h--):($(this).addClass("active_blue"),h++),d+l>=7&&h>1&&l>=2?(r=a(l,6-d).length*a(h,1).length,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r)):d+l>=7&&1==h&&l>=2?(r=a(l,6-d).length,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r)):(r=0,$("footer div span i").eq(0).html(r),$("footer div span i").eq(1).html(2*r))});var p=1;$(".header span").on("touchend",function(e){1==p?(t(),p=2):2==p&&(i(),p=1)}),$("#modal").on("click",function(e){(e=window.event||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,i(),p=1})});